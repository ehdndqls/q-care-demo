<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Q-Care</title>
    <link rel="stylesheet" href="css/join.css">
</head>
<body>
<div class="container">
    Header with Logo
    <div class="header">
        <div class="logo">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 2C8.268 2 2 8.268 2 16s6.268 14 14 14 14-6.268 14-14S23.732 2 16 2zm0 25c-6.065 0-11-4.935-11-11S9.935 5 16 5s11 4.935 11 11-4.935 11-11 11z" fill="#10b981"/>
                <path d="M16 8c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm3 9h-2v2c0 .553-.447 1-1 1s-1-.447-1-1v-2h-2c-.553 0-1-.447-1-1s.447-1 1-1h2v-2c0-.553.447-1 1-1s1 .447 1 1v2h2c.553 0 1 .447 1 1s-.447 1-1 1z" fill="#10b981"/>
                <text x="16" y="20" text-anchor="middle" fill="#10b981" font-family="Arial, sans-serif" font-size="8" font-weight="bold">Q</text>
            </svg>
            <span class="logo-text">Q-Care</span>
        </div>
    </div>

    Main Content
    <div class="main-content">
        <h1 class="title">Create Account</h1>
        <p class="subtitle">Join Q-Care for better healthcare access</p>

        <form id="signupForm" class="signup-form">
            Personal Information
            <div class="form-section">
                <h3 class="section-title">Personal Information</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" name="lastName" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="phoneNum">Phone Number</label>
                    <input type="tel" id="phoneNum" name="phoneNum" required>
                </div>

                <div class="form-group">
                    <label for="brithDate">Date of Birth</label>
                    <input type="date" id="brithDate" name="brithDate" required>
                </div>

                <div class="form-group">
                    <label for="language">Preferred Language</label>
                    <select id="language" name="language" required>
                        <option value="">Select Language</option>
                        <option value="KOREAN">한국어</option>
                        <option value="ENGLISH">English</option>
                        <option value="JAPANESE">日本語</option>
                        <option value="CHINESE">中文</option>
                        <option value="FRENCH">Français</option>
                        <option value="GERMAN">Deutsch</option>
                        <option value="SPANISH">Español</option>
                        <option value="RUSSIAN">Русский</option>
                        <option value="ARABIC">العربية</option>
                        <option value="HINDI">हिन्दी</option>
                        <option value="PORTUGUESE">Português</option>
                        <option value="ITALIAN">Italiano</option>
                        <option value="VIETNAMESE">Tiếng Việt</option>
                        <option value="THAI">ไทย</option>
                        <option value="TURKISH">Türkçe</option>
                    </select>
                </div>
            </div>

            Security
            <div class="form-section">
                <h3 class="section-title">Security</h3>

                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="password-input">
                        <input type="password" id="password" name="password" required minlength="8">
                        <button type="button" class="toggle-password" onclick="togglePassword('password')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <div class="password-input">
                        <input type="password" id="confirmPassword" name="confirmPassword" required minlength="8">
                        <button type="button" class="toggle-password" onclick="togglePassword('confirmPassword')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            Terms
            <div class="form-group checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="terms" required>
                    <span class="checkmark"></span>
                    I agree to the <a href="#" class="link">Terms of Service</a> and <a href="#" class="link">Privacy Policy</a>
                </label>
            </div>

            Submit Button
            <button type="submit" class="submit-btn">Create Account</button>

            Login Link
            <div class="login-link">
                Already have an account? <a href="login.html" class="link">Sign In</a>
            </div>
        </form>
    </div>
</div>

<script>
    function togglePassword(fieldId) {
        const field = document.getElementById(fieldId);
        const type = field.getAttribute('type') === 'password' ? 'text' : 'password';
        field.setAttribute('type', type);
    }

    document.getElementById('signupForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const formData = new FormData(this);
        const data = Object.fromEntries(formData);

        // Password validation
        if (data.password !== data.confirmPassword) {
            alert('Passwords do not match!');
            return;
        }

        // Add default location (can be updated later)
        data.latitude = 37.5665;
        data.longitude = 126.9780;

        try {
            const response = await fetch('/request-join', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });

            if (response.ok) {
                alert('Account created successfully!');
                window.location.href = 'login.html';
            } else {
                const error = await response.json();
                alert(error.errorMessage || 'Registration failed');
            }
        } catch (error) {
            alert('Network error. Please try again.');
        }
    });
</script>
</body>
</html>